2020.07.20
------------

DockerHub
==========
Repository 1개 당, 이미지 1개 (단 다른 태그의 동일한 이미지는 계속 푸쉬 가능)

특정 이미지를 외부 repository로 push하기위해 tag 재지정 필요
<pre>
<code>

# 원본 이미지를 dockerhub계정명을 포함한 태그로 재지정
docker tag hello:v8 ljwkeke/hello:latest

# 변경된 이미지 push
docker push ljwkeke/hello:latest

* 일반적으로 개발자들은 새롭게 릴리즈된 버전에 latest 태그붙여서 push한다.
=> 개발자가 올려놓은 이미지 사용중 새로운 버전이 릴리즈된다면, 혼란이 발생될 수 있음
=> 이미지 pull할 때, latest보단 특정 버전을 지정하여 사용할 것을 권장
=> 혹은 digest값으로 구분하는 것도 유용 

</code>
</pre>


Private Repository
==================
1. dockerhub에서 registry 이미지 pull하여 생성.
=> Docker의 Private Repository는 컨테이너 형태로 제공된다.
<pre>
<code>
docker pull registry:2
</code>
</pre>

2. run 옵션을 이용하여 registry 컨테이너 생성.
<pre>
<code>
docker run -d -p 5000:5000 --restart always --name registry registry:2
# docker registry는 5000번 포트로 제공된다.
# --restart: 재시작 옵션 지정
  => --restart always: 해당 컨테이너가 중지되었을 때, 언제나 재시작한다.
  
</code>
</pre>

3. Private Repositry로 특정 이미지 psuh
<pre>
<code>
# push할 이미지 pull
docker pull ubuntu
# push할 이미지의 tag를 재지정한다. 
# tag형식: localhost:5000/이미지명:태그
docker tag ubuntu localhost:5000/ubuntu
# tag된 이미지를 push한다.
docker push localhost:5000/ubuntu
</code>
</pre>
