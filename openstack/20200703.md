2020.07.03
=========

워드프레스 구축
------------

1) 실습환경

<img src=/img/20200703.png>

2) DB 구축
* 마운트 후 쉘스크립트 실행
<pre>
<code>
#!/bin/bash
setenforce 0
mkdir /var/lib/mysql
mkfs.xfs /dev/vdc
echo '/dev/vdc /var/lib/mysql xfs defaults 0 1' >> /etc/fstab
mount -a
yum-config-manager --add-repo=http://yum.mariadb.org/10.5/centos7-amd64
echo 'gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB' >> /etc/yum.repos.d/yum.mariadb.org_10.5_centos7-amd64.repo
echo 'gpgcheck=1' >> /etc/yum.repos.d/yum.mariadb.org_10.5_centos7-amd64.repo
yum install -y MariaDB-server
systemctl start mariadb
systemctl enable mariadb
mysql -u root -e "CREATE DATABASE wordpress_db"
mysql -u root -e "CREATE USER 'wp-admin'@'web서버 주소' IDENTIFIED BY 'dkagh1.'"
mysql -u root -e "GRANT ALL PRIVILEGES ON wordpress_db.* TO 'wp-admin'@'web서버 주소' IDENTIFIED BY 'dkagh1.'"
mysql -u root -e "FLUSH PRIVILEGES"
</code>
</pre>

3) WEB 구축
* 마운트 후 쉘스크립트 실행
<pre>
<code>
#!/bin/bash
setenforce 0
mkdir /var/www
mkfs.xfs /dev/vdc
echo '/dev/vdc /var/www xfs defaults 0 1' >> /etc/fstab
mount -a
yum install -y httpd epel-release wget
wget https://rpms.remirepo.net/enterprise/remi-release-7.rpm -P /home/centos/
rpm -i /home/centos/remi-release-7.rpm
rm -rf /home/centos/remi-release-7.rpm
yum-config-manager --disable remi-safe
yum-config-manager --enable remi-php74
yum install -y php php-mysql
wget https://wordpress.org/latest.tar.gz -P /home/centos/
tar -xf /home/centos/latest.tar.gz -C /var/www/html
rm -rf /home/centos/latest.tar.gz
cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php
sed -i s/database_name_here/wordpress_db/g /var/www/html/wordpress/wp-config.php
sed -i s/username_here/wp-admin/g /var/www/html/wordpress/wp-config.php
sed -i s/password_here/dkagh1./g /var/www/html/wordpress/wp-config.php
sed -i s/localhost/db서버 주소/g /var/www/html/wordpress/wp-config.php
systemctl start httpd
systemctl enable httpd
</code>
</pre>
